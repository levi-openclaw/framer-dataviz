import{Children as xn,cloneElement as Ka,forwardRef as Ha,isValidElement as $a,useRef as ja}from"react";import{useCallback as Ua,useEffect as Oa,useRef as za}from"react";var te=class extends Error{name=this.constructor.name},W=class extends Error{name=this.constructor.name};var pt=Symbol(),mt=Symbol(),Pn=Symbol(),Fn=Symbol(),Dn=Symbol(),Sn=Symbol(),Nn=Symbol(),gt=Symbol(),yt=Symbol(),o={getAiServiceInfo:pt,sendTrackingEvent:mt,environmentInfo:Pn,initialState:Fn,showUncheckedPermissionToasts:Dn,marshal:Sn,unmarshal:Nn,getHTMLForNode:gt,setHTMLForNode:yt},Ue="INTERNAL_",Oe=`${Ue}getAiServiceInfo`,ze=`${Ue}sendTrackingEvent`,$=`${Ue}getHTMLForNode`,j=`${Ue}setHTMLForNode`;function Ge(i){return i!==void 0}function oi(i){return i===void 0}function p(i){return i===null}function ri(i){return i!==null}function ie(i){return i===!0||i===!1}function u(i){return typeof i=="string"}function E(i){return typeof i=="number"&&Number.isFinite(i)}function ne(i){return typeof i=="function"}function f(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function Ke(i){if(typeof i!="object"||i===null)return!1;let e=Object.getPrototypeOf(i);return e===null||e===Object.prototype}function ht(i){return Array.isArray(i)}function He(i,e){throw e||new Error(i?`Unexpected value: ${i}`:"Application entered invalid state")}function l(i,...e){if(i)return;let t=Error("Assertion Error"+(e.length>0?": "+e.join(" "):""));if(t.stack)try{let n=t.stack.split(`
`);n[1]?.includes("assert")?(n.splice(1,1),t.stack=n.join(`
`)):n[0]?.includes("assert")&&(n.splice(0,1),t.stack=n.join(`
`))}catch{}throw t}function g(i){for(let e of Reflect.ownKeys(i)){let t=i[e];!t||typeof t!="object"&&!ne(t)||g(t)}return Object.freeze(i)}function si(i,e){if(i===e)return!0;if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}function li(i){return[i.slice(0,-1),i.at(-1)]}var s="__class";var ae=class i{id;url;extension;constructor(e){this.url=e.url,this.id=e.id,this.extension=e.extension}static[o.unmarshal](e,t){return new i(t)}[o.marshal](){return{[s]:"FileAsset",id:this.id,url:this.url,extension:this.extension}}};function vn(i){return i instanceof ae}var Vn="ImageAsset";function di(i){return f(i)?i[s]===Vn:!1}var M=class i{id;url;thumbnailUrl;altText;resolution;#e;#t;constructor(e,t){this.#t=e,this.url=t.url,this.id=t.id,this.thumbnailUrl=t.thumbnailUrl,this.altText=t.altText,this.resolution=t.resolution}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return{[s]:"ImageAsset",id:this.id,url:this.url,thumbnailUrl:this.thumbnailUrl,altText:this.altText,resolution:this.resolution}}cloneWithAttributes({altText:e,resolution:t}){return new i(this.#t,{[s]:"ImageAsset",id:this.id,url:this.url,thumbnailUrl:this.thumbnailUrl,altText:e??this.altText,resolution:t??this.resolution})}async measure(){return Wn(this.url)}async getData(){if(this.#e&&this.#e.bytes.length>0)return this.#e;let e=await this.#t.invoke("getImageData",{id:this.id,resolution:this.resolution});if(!e)throw new Error("Failed to load image data");return this.#e=e,e}async loadBitmap(){let{mimeType:e,bytes:t}=await this.getData(),n=new Blob([t],{type:e});return createImageBitmap(n)}async loadImage(){let e=await this.getData(),t=URL.createObjectURL(new Blob([e.bytes]));return new Promise((n,a)=>{let r=new Image;r.onload=()=>n(r),r.onerror=()=>a(),r.src=t})}};function kn(i){return i instanceof M}function w(i){return i.type==="bytes"?[i.bytes.buffer]:[]}function An(i){if(!f(i))return!1;let e="bytes",t="mimeType";return!(!(e in i)||!(t in i)||!(i[e]instanceof Uint8Array)||!u(i[t]))}async function oe(i){if(i instanceof File)return bt(i);let e=await ui(i.image);return{name:i.name,altText:i.altText,resolution:i.resolution,preferredImageRendering:i.preferredImageRendering,...e}}async function ft(i){if(i instanceof File)return bt(i);let e=await ui(i.file);return{name:i.name,...e}}async function ui(i){return i instanceof File?bt(i):An(i)?{type:"bytes",mimeType:i.mimeType,bytes:i.bytes}:{type:"url",url:i}}function Ct(i){return Promise.all(i.map(oe))}async function bt(i){return new Promise((e,t)=>{let n=new FileReader;n.onload=a=>{let r=i.type,d=a.target?.result;if(!d||!(d instanceof ArrayBuffer)){t(new Error("Failed to read file, arrayBuffer is null"));return}let y=new Uint8Array(d);e({bytes:y,mimeType:r,type:"bytes",name:i.name})},n.onerror=a=>{t(a)},n.readAsArrayBuffer(i)})}async function Wn(i){let e=i instanceof File,t=e?URL.createObjectURL(i):i,n=new Image;return n.crossOrigin="anonymous",new Promise((a,r)=>{n.onload=()=>{a({width:n.naturalWidth,height:n.naturalHeight})},n.onerror=d=>{r(d)},n.src=t}).finally(()=>{e&&URL.revokeObjectURL(t)})}var $e=class{};var En="unsupported",re=class i extends $e{type=En;#e;constructor(e){super(),this.#e=e}static[o.unmarshal](e,t){return new i(t)}[o.marshal](){return this.#e}};function Mn(i){return i instanceof $e}var wn="Font";function pi(i){return f(i)&&i[s]===wn}function Rn(i){if(!E(i))return!1;switch(i){case 100:case 200:case 300:case 400:case 500:case 600:case 700:case 800:case 900:return!0;default:return!1}}function Bn(i){if(!u(i))return!1;switch(i){case"normal":case"italic":return!0;default:return!1}}function mi(i){return f(i)?u(i.family)&&u(i.selector)&&Rn(i.weight)&&Bn(i.style):!1}var v=class i{selector;family;weight;style;constructor(e){this.selector=e.selector,this.family=e.family,this.weight=e.weight,this.style=e.style}static[o.unmarshal](e,t){let n=ci.get(t.selector);if(n)return n;let a=new i(t);return ci.set(t.selector,a),a}[o.marshal](){return{[s]:"Font",selector:this.selector,family:this.family,weight:this.weight,style:this.style}}},ci=new Map;var Ln="LinearGradient",Un="RadialGradient",On="ConicGradient",q=class{#e;get stops(){return this.#e.stops}constructor(e){this.#e=e}cloneWithAttributes(e){let t=this.constructor;return new t({...this.#e,...e})}},se=class i extends q{[s]=Ln;#e;get angle(){return this.#e.angle}constructor(e){super(e),this.#e=e}static[o.unmarshal](e,t){return new i({...t,stops:c(e,t.stops)})}[o.marshal](){return D({...this.#e,[s]:this[s]})}toCSS(){let e=this.#e.stops.map(t=>(l(u(t.color),"ColorStyle not supported yet"),`${t.color} ${t.position*100}%`)).join(", ");return`linear-gradient(${this.angle}deg, ${e})`}},le=class i extends q{[s]=Un;#e;get width(){return this.#e.width}get height(){return this.#e.height}get x(){return this.#e.x}get y(){return this.#e.y}constructor(e){super(e),this.#e=e}static[o.unmarshal](e,t){return new i({...t,stops:c(e,t.stops)})}[o.marshal](){return D({...this.#e,[s]:this[s]})}toCSS(){let e=this.stops.map((t,n)=>{l(u(t.color),"ColorStyle not supported yet");let a=this.stops[n+1],r=t.position===1&&a?.position===1?t.position-1e-4:t.position;return`${t.color} ${r*100}%`}).join(", ");return`radial-gradient(${this.width} ${this.height} at ${this.x} ${this.y}, ${e})`}},de=class i extends q{[s]=On;#e;get angle(){return this.#e.angle}get x(){return this.#e.x}get y(){return this.#e.y}constructor(e){super(e),this.#e=e}static[o.unmarshal](e,t){return new i({...t,stops:c(e,t.stops)})}[o.marshal](){return D({...this.#e,[s]:this[s]})}toCSS(){let e=this.stops.map(t=>(l(u(t.color),"ColorStyle not supported yet"),`${t.color} ${t.position*360}deg`)).join(", ");return`conic-gradient(from ${this.angle}deg at ${this.x} ${this.y}, ${e})`}};function gi(i){return i instanceof q}var zn="ColorStyle";function je(i){return f(i)?i[s]===zn:!1}var L=class i{id;name;path;light;dark;#e;constructor(e,t){this.id=t.id,this.name=t.name,this.light=t.light,this.dark=t.dark,this.path=t.path,this.#e=e}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return{[s]:"ColorStyle",id:this.id,name:this.name,light:this.light,dark:this.dark,path:this.path}}async setAttributes(e){let t=await this.#e.invoke("setColorStyleAttributes",this.id,e);return t?new i(this.#e,t):null}async getPluginData(e){return this.#e.invoke("getPluginDataForNode",this.id,e)}async setPluginData(e,t){return this.#e.invoke("setPluginDataForNode",this.id,e,t)}async getPluginDataKeys(){return this.#e.invoke("getPluginDataKeysForNode",this.id)}async remove(){return this.#e.invoke("removeColorStyle",this.id)}};function X(i){return i instanceof L}var Gn="TextStyle";function yi(i){return f(i)?i[s]===Gn:!1}var ue=class i{id;name;path;tag;font;boldFont;italicFont;boldItalicFont;color;transform;alignment;decoration;decorationColor;decorationThickness;decorationStyle;decorationSkipInk;decorationOffset;balance;breakpoints;minWidth;fontSize;letterSpacing;lineHeight;paragraphSpacing;#e;constructor(e,t){this.id=t.id,this.name=t.name,this.path=t.path,this.tag=t.tag,this.font=v[o.unmarshal](e,t.font),this.boldFont=t.boldFont&&v[o.unmarshal](e,t.boldFont),this.italicFont=t.italicFont&&v[o.unmarshal](e,t.italicFont),this.boldItalicFont=t.boldItalicFont&&v[o.unmarshal](e,t.boldItalicFont),this.color=je(t.color)?L[o.unmarshal](e,t.color):t.color,this.transform=t.transform,this.alignment=t.alignment,this.decoration=t.decoration,this.decorationColor=je(t.decorationColor)?L[o.unmarshal](e,t.decorationColor):t.decorationColor,this.decorationThickness=t.decorationThickness,this.decorationStyle=t.decorationStyle,this.decorationSkipInk=t.decorationSkipInk,this.decorationOffset=t.decorationOffset,this.balance=t.balance,this.breakpoints=t.breakpoints,this.minWidth=t.minWidth,this.fontSize=t.fontSize,this.letterSpacing=t.letterSpacing,this.lineHeight=t.lineHeight,this.paragraphSpacing=t.paragraphSpacing,this.#e=e}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return{[s]:"TextStyle",id:this.id,name:this.name,path:this.path,tag:this.tag,font:this.font[o.marshal](),boldFont:this.boldFont?.[o.marshal]()??null,italicFont:this.italicFont?.[o.marshal]()??null,boldItalicFont:this.boldItalicFont?.[o.marshal]()??null,color:X(this.color)?this.color[o.marshal]():this.color,transform:this.transform,alignment:this.alignment,decoration:this.decoration,decorationColor:X(this.decorationColor)?this.decorationColor[o.marshal]():this.decorationColor,decorationThickness:this.decorationThickness,decorationStyle:this.decorationStyle,decorationSkipInk:this.decorationSkipInk,decorationOffset:this.decorationOffset,balance:this.balance,breakpoints:this.breakpoints,minWidth:this.minWidth,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,paragraphSpacing:this.paragraphSpacing}}async setAttributes(e){let t=await this.#e.invoke("setTextStyleAttributes",this.id,e);return t?new i(this.#e,t):null}async getPluginData(e){return this.#e.invoke("getPluginDataForNode",this.id,e)}async setPluginData(e,t){return this.#e.invoke("setPluginDataForNode",this.id,e,t)}async getPluginDataKeys(){return this.#e.invoke("getPluginDataKeysForNode",this.id)}async remove(){return this.#e.invoke("removeTextStyle",this.id)}};function Tt(i){return i instanceof ue}var C=class{#e;#t;get nodeId(){return this.#t.nodeId}get nodeType(){return this.#t.nodeType}get id(){return this.#t.id}get name(){return this.#t.name}get description(){return this.#t.description??null}constructor(e,t){this.#e=e,this.#t=t}async setAttributes(e){let t=await this.#e.invoke("updateVariable",this.nodeId,this.id,{...e,type:this.type});if(p(t))return null;let n=this.constructor;return new n(this.#e,t)}async remove(){await this.#e.invoke("removeVariables",this.nodeId,[this.id])}},b="Variable";function x(i){let e=i.at(0);return l(!oi(e)),`${e.toLowerCase()}${i.slice(1,-b.length)}`}var Kn=`Boolean${b}`,Hn=x(Kn),ce=class i extends C{type=Hn;#e;constructor(e,t){super(e,t),this.#e=t}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return this.#e}},$n=`Number${b}`,jn=x($n),pe=class i extends C{type=jn;#e;constructor(e,t){super(e,t),this.#e=t}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return this.#e}},qn=`String${b}`,Xn=x(qn),me=class i extends C{type=Xn;#e;constructor(e,t){super(e,t),this.#e=t}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return this.#e}},Yn=`FormattedText${b}`,Zn=x(Yn),ge=class i extends C{type=Zn;#e;constructor(e,t){super(e,t),this.#e=t}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return this.#e}},_n=`Enum${b}`,Jn=x(_n),R=class i{#e;#t;#i;#n;get id(){return this.#n.id}get name(){return this.#n.name}get nameByLocale(){return this.#n.nameByLocale}constructor(e,t,n,a){this.#e=e,this.#t=t,this.#i=n,this.#n=a}async setAttributes(e){let t=await this.#e.invoke("updateEnumCase",this.#t,this.#i,this.id,e);return t?new i(this.#e,this.#t,this.#i,t):null}async remove(){await this.#e.invoke("removeEnumCase",this.#t,this.#i,this.id)}},ye=class i extends C{type=Jn;#e;#t;#i;get cases(){return this.#i||(this.#i=g(this.#t.cases.map(e=>new R(this.#e,this.nodeId,this.id,e)))),this.#i}constructor(e,t){super(e,t),this.#e=e,this.#t=t}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return this.#t}async addCase(e){let t=await this.#e.invoke("addEnumCase",this.nodeId,this.id,e);return t?new R(this.#e,this.nodeId,this.id,t):null}async setCaseOrder(e){await this.#e.invoke("setEnumCaseOrder",this.nodeId,this.id,e)}},Qn=`Color${b}`,ea=x(Qn),he=class i extends C{type=ea;#e;constructor(e,t){super(e,t),this.#e=t}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return this.#e}},ta=`Image${b}`,ia=x(ta),fe=class i extends C{type=ia;#e;constructor(e,t){super(e,t),this.#e=t}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return this.#e}},na=`File${b}`,aa=x(na),Ce=class i extends C{type=aa;#e;get allowedFileTypes(){return this.#e.allowedFileTypes}constructor(e,t){super(e,t),this.#e=t}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return this.#e}},oa=`Link${b}`,ra=x(oa),be=class i extends C{type=ra;#e;constructor(e,t){super(e,t),this.#e=t}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return this.#e}},sa=`Date${b}`,la=x(sa),Te=class i extends C{type=la;#e;get displayTime(){return this.#e.displayTime}constructor(e,t){super(e,t),this.#e=t}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return this.#e}},da=`Border${b}`,ua=x(da),Ie=class i extends C{type=ua;#e;constructor(e,t){super(e,t),this.#e=t}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return this.#e}},ca=`Unsupported${b}`,pa=x(ca),xe=class i extends C{type=pa;#e;constructor(e,t){super(e,t),this.#e=t}static[o.unmarshal](e,t){return new i(e,t)}[o.marshal](){return this.#e}};function hi(i){return i instanceof C}function ma(i){return hi(i)&&i.nodeType==="component"}function ga(i){return f(i)&&o.marshal in i}function D(i){if(ga(i))return i[o.marshal]();if(ht(i))return i.map(D);if(Ke(i)){let e={};for(let t of Object.keys(i))e[t]=D(i[t]);return e}return i}var fi={ColorStyle:L,ConicGradient:de,FileAsset:ae,Font:v,ImageAsset:M,LinearGradient:se,RadialGradient:le,TextStyle:ue,BooleanVariable:ce,BorderVariable:Ie,ColorVariable:he,DateVariable:Te,EnumVariable:ye,FileVariable:Ce,FormattedTextVariable:ge,ImageVariable:fe,LinkVariable:be,NumberVariable:pe,StringVariable:me,UnsupportedVariable:xe,UnsupportedComputedValue:re};function ya(i){return Ke(i)&&u(i[s])&&i[s]in fi}function c(i,e){if(ya(e))return fi[e[s]][o.unmarshal](i,e);if(ht(e))return e.map(t=>c(i,t));if(Ke(e)){let t={};for(let n of Object.keys(e))t[n]=c(i,e[n]);return t}return e}function ha(i){return i.type==="separator"}function qe(i,e){let t=[];for(let n of i){if(ha(n)){t.push(n);continue}let{onAction:a,...r}=n,d=r;if(n.onAction){let y=Math.random();e.set(y,n.onAction),d.actionId=y}n.submenu&&(d.submenu=qe(n.submenu,e)),t.push(d)}return t}var fa={canvas:!0,image:!0,editImage:!0,configureManagedCollection:!0,syncManagedCollection:!0,collection:!0,localization:!0,code:!0,api:!0},Wo=Object.keys(fa);var Xe="type",Ci={[Xe]:"pluginReadySignal"},Ca="pluginReadyResponse";var ba={methodResponse:!0,subscriptionMessage:!0,permissionUpdate:!0,menuAction:!0};function bi(i){return f(i)&&u(i[Xe])&&i[Xe]in ba}function Ti(i){return f(i)&&i[Xe]===Ca}var S=class{#e;#t;#i;get id(){return this.#i.id}get name(){return this.#i.name}constructor(e,t,n){this.#e=e,this.#t=t,this.#i=n}async setAttributes(e){let t={...e,type:this.type,id:this.id},[n]=await this.#e.invoke("addCollectionFields2",this.#t,[t]);if(l(Ge(n)),p(n))return null;l(n.type===this.type);let a=this.constructor;return new a(this.#e,this.#t,n)}async remove(){await this.#e.invoke("removeCollectionFields",this.#t,[this.id])}},F=class extends S{#e;get required(){return this.#e.required}constructor(e,t,n){super(e,t,n),this.#e=n}},Ye=class extends S{type=Pt},Ze=class extends S{type=Ft},_e=class extends S{type=Dt},Je=class extends F{type=St;#e;constructor(e,t,n){super(e,t,n),this.#e=n}get basedOn(){return this.#e.basedOn}},Qe=class extends F{type=Nt},Pe=class extends F{type=vt},et=class extends F{type=kt},tt=class extends F{type=At;#e;get displayTime(){return this.#e.displayTime}constructor(e,t,n){super(e,t,n),this.#e=n}},it=class extends S{type=Rt},Fe=class extends S{type=Bt},nt=class extends F{type=Wt;#e;get allowedFileTypes(){return this.#e.allowedFileTypes}constructor(e,t,n){super(e,t,n),this.#e=n}},at=class extends S{type=Et;#e;#t;#i;#n;get cases(){return this.#n||(this.#n=this.#i.cases.map(e=>new R(this.#e,this.#t,this.id,e)),g(this.#n)),this.#n}constructor(e,t,n){super(e,t,n),this.#e=e,this.#t=t,this.#i=n}async addCase(e){let t=await this.#e.invoke("addEnumCase",this.#t,this.id,e);return t?new R(this.#e,this.#t,this.id,t):null}async setCaseOrder(e){await this.#e.invoke("setEnumCaseOrder",this.#t,this.id,e)}},ot=class extends F{type=Mt;#e;get collectionId(){return this.#e.collectionId}constructor(e,t,n){super(e,t,n),this.#e=n}},rt=class extends F{type=wt;#e;get collectionId(){return this.#e.collectionId}constructor(e,t,n){super(e,t,n),this.#e=n}},It=class extends F{type=Vt;fields;constructor(e,t,n){super(e,t,n);let a=n.fields[0];this.fields=[new Pe(e,t,a)]}};function xt(i,e,t){return i.map(n=>{switch(n.type){case Pt:return new Ye(e,t,n);case Ft:return new Ze(e,t,n);case Dt:return new _e(e,t,n);case St:return new Je(e,t,n);case Nt:return new Qe(e,t,n);case vt:return new Pe(e,t,n);case kt:return new et(e,t,n);case At:return new tt(e,t,n);case Rt:return new it(e,t,n);case Bt:return new Fe(e,t,n);case Wt:return new nt(e,t,n);case Et:return new at(e,t,n);case Mt:return new ot(e,t,n);case wt:return new rt(e,t,n);case Vt:return new It(e,t,n);default:return new Fe(e,t,n)}})}function Ta(i){return i instanceof S}var Ii="action";function Ia(i){return!!i&&Ii in i&&u(i[Ii])}function xi(i){return Object.keys(i).reduce((e,t)=>{let n=i[t];return Ia(n)&&(e[t]=n),e},{})}var xa={array:!1,boolean:!1,collectionReference:!1,color:!1,date:!1,enum:!1,file:!1,formattedText:!1,image:!0,link:!1,multiCollectionReference:!1,number:!1,string:!1,unsupported:!1};function Pa(i){return xa[i]}function Fa(i){return Pa(i.type)}var Pt="boolean",Ft="color",Dt="number",St="string",Nt="formattedText",vt="image",Vt="array",kt="link",At="date",Wt="file",Et="enum",Mt="collectionReference",wt="multiCollectionReference",Rt="divider",Bt="unsupported";function Da(i){return i.map(e=>{if(e.type!=="enum")return e;let t=e.cases.map(n=>{let a=n.nameByLocale?xi(n.nameByLocale):void 0;return{...n,nameByLocale:a}});return{...e,cases:t}})}function Pi(i,e){let t={};for(let n in i){let a=i[n];if(!a)continue;if(a.type!=="array"){t[n]=c(e,a);continue}let r=a.value.map(d=>{let y=Pi(d.fieldData,e),we={};for(let k in y){let A=y[k];l(A&&Fa(A),"Unsupported array item field data entry"),we[k]=A}return{...d,fieldData:we}});t[n]={...a,value:r}}return t}var Y=class{id;name;readonly;managedBy;#e;constructor(e,t){this.id=e.id,this.name=e.name,this.readonly=e.readonly,l(e.managedBy!=="user","Managed Collection can only be managed by a plugin"),this.managedBy=e.managedBy,this.#e=t,g(this)}async getItemIds(){return this.#e.invoke("getManagedCollectionItemIds",this.id)}async setItemOrder(e){return this.#e.invoke("setManagedCollectionItemOrder",this.id,e)}async getFields(){return this.#e.invoke("getManagedCollectionFields2",this.id)}async setFields(e){let t=Da(e);return this.#e.invoke("setManagedCollectionFields",this.id,t)}async addItems(e){return this.#e.invoke("addManagedCollectionItems2",this.id,e)}async removeItems(e){return this.#e.invoke("removeManagedCollectionItems",this.id,e)}async setAsActive(){return this.#e.invoke("setActiveCollection",this.id)}async setPluginData(e,t){return this.#e.invoke("setPluginDataForNode",this.id,e,t)}async getPluginData(e){return this.#e.invoke("getPluginDataForNode",this.id,e)}async getPluginDataKeys(){return this.#e.invoke("getPluginDataKeysForNode",this.id)}async navigateTo(e){return this.#e.invoke("navigateTo",this.id,e)}},U=class{id;name;slugFieldName;slugFieldBasedOn;readonly;managedBy;#e;constructor(e,t){this.id=e.id,this.name=e.name,this.slugFieldName=e.slugFieldName,this.slugFieldBasedOn=e.slugFieldBasedOn,this.readonly=e.readonly,this.managedBy=e.managedBy,this.#e=t,g(this)}async setItemOrder(e){return this.#e.invoke("setCollectionItemOrder",this.id,e)}async getFields(){let e=await this.#e.invoke("getCollectionFields2",this.id,!0);return xt(e,this.#e,this.id)}async addFields(e){let t=await this.#e.invoke("addCollectionFields2",this.id,e);return l(t.every(ri)),xt(t,this.#e,this.id)}async removeFields(e){return this.#e.invoke("removeCollectionFields",this.id,e)}async setFieldOrder(e){return this.#e.invoke("setCollectionFieldOrder",this.id,e)}async getItems(){return(await this.#e.invoke("getCollectionItems2",this.id)).map(t=>new De(t,this.#e))}async addItems(e){await this.#e.invoke("addCollectionItems2",this.id,e)}async removeItems(e){return this.#e.invoke("removeCollectionItems",e)}async setAsActive(){return this.#e.invoke("setActiveCollection",this.id)}async setPluginData(e,t){return this.#e.invoke("setPluginDataForNode",this.id,e,t)}async getPluginData(e){return this.#e.invoke("getPluginDataForNode",this.id,e)}async getPluginDataKeys(){return this.#e.invoke("getPluginDataKeysForNode",this.id)}async navigateTo(e){return this.#e.invoke("navigateTo",this.id,e)}},De=class i{id;nodeId;slug;slugByLocale;draft;fieldData;#e;constructor(e,t){let n=Pi(e.fieldData,t);this.id=e.externalId??e.nodeId,this.nodeId=e.nodeId,this.slug=e.slug,this.slugByLocale=e.slugByLocale,this.draft=e.draft??!1,this.fieldData=n,this.#e=t,g(this)}async remove(){return this.#e.invoke("removeCollectionItems",[this.id])}async setAttributes(e){let t=await this.#e.invoke("setCollectionItemAttributes2",this.id,e);return t?new i(t,this.#e):null}async setPluginData(e,t){return this.#e.invoke("setPluginDataForNode",this.id,e,t)}async getPluginData(e){return this.#e.invoke("getPluginDataForNode",this.id,e)}async getPluginDataKeys(){return this.#e.invoke("getPluginDataKeysForNode",this.id)}async navigateTo(e){return this.#e.invoke("navigateTo",this.nodeId,e)}};var Sa={fixed:!0,sticky:!0,absolute:!0,relative:!0},Fi="position";function Zo(i){if(!(Fi in i))return!1;let e=i[Fi];return u(e)&&Sa[e]===!0}var Di="top";function _o(i){if(!(Di in i))return!1;let e=i[Di];return u(e)||p(e)}var Si="width";function Jo(i){if(!(Si in i))return!1;let e=i[Si];return u(e)||p(e)}var Ni="maxWidth";function Qo(i){if(!(Ni in i))return!1;let e=i[Ni];return u(e)||p(e)}var vi="aspectRatio";function er(i){if(!(vi in i))return!1;let e=i[vi];return E(e)||p(e)}var Vi="name";function tr(i){if(!(Vi in i))return!1;let e=i[Vi];return u(e)||p(e)}var ki="visible";function ir(i){if(!(ki in i))return!1;let e=i[ki];return ie(e)}var Ai="locked";function nr(i){if(!(Ai in i))return!1;let e=i[Ai];return ie(e)}var Wi="backgroundColor";function ar(i){if(!(Wi in i))return!1;let e=i[Wi];return u(e)||X(e)||p(e)}var Ei="backgroundColor";function or(i){if(!(Ei in i))return!1;let e=i[Ei];return u(e)||je(e)||p(e)}var Mi="backgroundImage";function rr(i){if(!(Mi in i))return!1;let e=i[Mi];return e instanceof M||p(e)}var wi="backgroundImage";function sr(i){if(!(wi in i))return!1;let e=i[wi];return e instanceof M?!1:di(e)||p(e)}var Ri="backgroundGradient";function lr(i){if(!(Ri in i))return!1;let e=i[Ri];return gi(e)||p(e)}var Bi="backgroundGradient";function dr(i){if(!(Bi in i))return!1;let e=i[Bi];return f(e)||p(e)}var Li="rotation";function ur(i){if(!(Li in i))return!1;let e=i[Li];return E(e)}var Ui="opacity";function cr(i){if(!(Ui in i))return!1;let e=i[Ui];return E(e)}var Oi="borderRadius";function pr(i){if(!(Oi in i))return!1;let e=i[Oi];return u(e)||p(e)}var zi="border";function mr(i){if(!(zi in i))return!1;let e=i[zi];return p(e)||X(e.color)}var Gi="svg";function gr(i){if(!(Gi in i))return!1;let e=i[Gi];return u(e)}var Ki="textTruncation";function yr(i){if(!(Ki in i))return!1;let e=i[Ki];return E(e)||p(e)}var Hi="zIndex";function hr(i){if(!(Hi in i))return!1;let e=i[Hi];return E(e)||p(e)}var $i="overflow";function fr(i){if(!($i in i))return!1;let e=i[$i];return u(e)||p(e)}var ji="componentIdentifier";function Cr(i){if(!(ji in i))return!1;let e=i[ji];return u(e)}var qi="font";function br(i){if(!(qi in i))return!1;let e=i[qi];return mi(e)}var Xi="font";function Tr(i){if(!(Xi in i))return!1;let e=i[Xi];return pi(e)||p(e)}var Yi="inlineTextStyle";function Ir(i){if(!(Yi in i))return!1;let e=i[Yi];return Tt(e)||p(e)}var Zi="inlineTextStyle";function xr(i){if(!(Zi in i))return!1;let e=i[Zi];return yi(e)||p(e)}var _i="link";function Pr(i){if(!(_i in i))return!1;let e=i[_i];return u(e)||p(e)}var Ji="imageRendering";function Fr(i){if(!(Ji in i))return!1;let e=i[Ji];return u(e)||p(e)}var Qi="layout";function nn(i){if(!(Qi in i))return!1;let e=i[Qi];return u(e)||p(e)}function Dr(i){return nn(i)?i.layout==="stack":!1}function Sr(i){return nn(i)?i.layout==="grid":!1}var en="isVariant";function an(i){if(!(en in i))return!1;let e=i[en];return ie(e)}function Lt(i){return an(i)?i.isVariant:!1}function on(i){return!an(i)||!Lt(i)?!1:!p(i.gesture)}var tn="isBreakpoint";function Na(i){if(!(tn in i))return!1;let e=i[tn];return ie(e)}function rn(i){return Na(i)?i.isBreakpoint:!1}var P=class{id;originalId;#e;constructor(e,t){this.id=e.id,this.originalId=e.originalId??null,this.#e=t}get isReplica(){return this.originalId!==null}async remove(){return this.#e.invoke("removeNodes2",[this.id])}async select(){return this.#e.invoke("setSelection",[this.id])}async clone(){if(this[s]==="UnknownNode")throw Error("Can not clone unknown node");return this.#e.cloneNode(this.id)}async setAttributes(e){if(this[s]==="UnknownNode")throw Error("Can not set attributes on unknown node");return this.#e.setAttributes(this.id,e)}async getRect(){return this.#e.invoke("getRect",this.id)}async zoomIntoView(e){return this.#e.invoke("zoomIntoView",[this.id],e)}async navigateTo(e){return this.#e.invoke("navigateTo",this.id,e)}async getParent(){return this.#e.getParent(this.id)}async getChildren(){return O(this)?Promise.resolve([]):this.#e.getChildren(this.id)}async getNodesWithType(e){return O(this)?Promise.resolve([]):(await this.#e.invoke("getNodesWithType",this.id,e)).map(n=>m(n,this.#e))}async getNodesWithAttribute(e){return O(this)?Promise.resolve([]):(await this.#e.invoke("getNodesWithAttribute",this.id,e)).map(n=>m(n,this.#e))}async getNodesWithAttributeSet(e){return O(this)?Promise.resolve([]):(await this.#e.invoke("getNodesWithAttributeSet",this.id,e)).map(n=>m(n,this.#e))}async*walk(){if(yield this,!O(this))for(let e of await this.getChildren())yield*e.walk()}async getPluginData(e){return this.#e.invoke("getPluginDataForNode",this.id,e)}async setPluginData(e,t){return this.#e.invoke("setPluginDataForNode",this.id,e,t)}async getPluginDataKeys(){return this.#e.invoke("getPluginDataKeysForNode",this.id)}},N=class extends P{[s]="FrameNode";name;visible;locked;backgroundColor;backgroundImage;backgroundGradient;rotation;opacity;borderRadius;border;imageRendering;position;top;right;bottom;left;centerX;centerY;width;height;maxWidth;minWidth;maxHeight;minHeight;aspectRatio;zIndex;link;linkOpenInNewTab;overflow;overflowX;overflowY;layout;gap;padding;stackDirection;stackDistribution;stackAlignment;stackWrapEnabled;gridColumnCount;gridRowCount;gridAlignment;gridColumnWidthType;gridColumnWidth;gridColumnMinWidth;gridRowHeightType;gridRowHeight;gridItemFillCellWidth;gridItemFillCellHeight;gridItemHorizontalAlignment;gridItemVerticalAlignment;gridItemColumnSpan;gridItemRowSpan;isVariant;isPrimaryVariant;isBreakpoint;isPrimaryBreakpoint;inheritsFromId;gesture;constructor(e,t){super(e,t),this.name=e.name??null,this.visible=e.visible??!0,this.locked=e.locked??!1,this.backgroundColor=c(t,e.backgroundColor)??null,this.backgroundImage=c(t,e.backgroundImage)??null,this.rotation=e.rotation??0,this.opacity=e.opacity??1,this.borderRadius=e.borderRadius??null,this.border=c(t,e.border)??null,this.backgroundGradient=c(t,e.backgroundGradient)??null,this.imageRendering=e.imageRendering??null,this.position=e.position,this.left=e.left??null,this.right=e.right??null,this.top=e.top??null,this.bottom=e.bottom??null,this.centerX=e.centerX??null,this.centerY=e.centerY??null,this.width=e.width??null,this.height=e.height??null,this.maxWidth=e.maxWidth??null,this.minWidth=e.minWidth??null,this.maxHeight=e.maxHeight??null,this.minHeight=e.minHeight??null,this.aspectRatio=e.aspectRatio??null,this.zIndex=e.zIndex??null,this.link=e.link??null,this.linkOpenInNewTab=e.linkOpenInNewTab??null,this.overflow=e.overflow??null,this.overflowX=e.overflowX??null,this.overflowY=e.overflowY??null,this.layout=e.layout??null,this.gap=e.gap??null,this.padding=e.padding??null,this.stackDirection=e.stackDirection??null,this.stackDistribution=e.stackDistribution??null,this.stackAlignment=e.stackAlignment??null,this.stackWrapEnabled=e.stackWrapEnabled??null,this.gridColumnCount=e.gridColumnCount??null,this.gridRowCount=e.gridRowCount??null,this.gridAlignment=e.gridAlignment??null,this.gridColumnWidthType=e.gridColumnWidthType??null,this.gridColumnWidth=e.gridColumnWidth??null,this.gridColumnMinWidth=e.gridColumnMinWidth??null,this.gridRowHeightType=e.gridRowHeightType??null,this.gridRowHeight=e.gridRowHeight??null,this.gridItemFillCellWidth=e.gridItemFillCellWidth??null,this.gridItemFillCellHeight=e.gridItemFillCellHeight??null,this.gridItemHorizontalAlignment=e.gridItemHorizontalAlignment??null,this.gridItemVerticalAlignment=e.gridItemVerticalAlignment??null,this.gridItemColumnSpan=e.gridItemColumnSpan??null,this.gridItemRowSpan=e.gridItemRowSpan??null,this.inheritsFromId=e.inheritsFromId??null,this.gesture=e.gesture??null,this.isVariant=e.isVariant??!1,this.isPrimaryVariant=e.isPrimaryVariant??!1,this.isBreakpoint=e.isBreakpoint??!1,this.isPrimaryBreakpoint=e.isPrimaryBreakpoint??!1,g(this)}},z=class extends P{[s]="TextNode";name;visible;locked;rotation;opacity;zIndex;font;inlineTextStyle;position;top;right;bottom;left;centerX;centerY;width;height;maxWidth;minWidth;maxHeight;minHeight;link;linkOpenInNewTab;gridItemFillCellWidth;gridItemFillCellHeight;gridItemHorizontalAlignment;gridItemVerticalAlignment;gridItemColumnSpan;gridItemRowSpan;overflow;overflowX;overflowY;textTruncation;#e;constructor(e,t){super(e,t),this.#e=t,this.name=e.name??null,this.visible=e.visible??!0,this.locked=e.locked??!1,this.rotation=e.rotation??0,this.opacity=e.opacity??1,this.zIndex=e.zIndex??null,this.font=c(t,e.font)??null,this.inlineTextStyle=c(t,e.inlineTextStyle)??null,this.position=e.position,this.left=e.left??null,this.right=e.right??null,this.top=e.top??null,this.bottom=e.bottom??null,this.centerX=e.centerX??null,this.centerY=e.centerY??null,this.width=e.width??null,this.height=e.height??null,this.maxWidth=e.maxWidth??null,this.minWidth=e.minWidth??null,this.maxHeight=e.maxHeight??null,this.minHeight=e.minHeight??null,this.link=e.link??null,this.linkOpenInNewTab=e.linkOpenInNewTab??null,this.overflow=e.overflow??null,this.overflowX=e.overflowX??null,this.overflowY=e.overflowY??null,this.textTruncation=e.textTruncation??null,this.gridItemFillCellWidth=e.gridItemFillCellWidth??null,this.gridItemFillCellHeight=e.gridItemFillCellHeight??null,this.gridItemHorizontalAlignment=e.gridItemHorizontalAlignment??null,this.gridItemVerticalAlignment=e.gridItemVerticalAlignment??null,this.gridItemColumnSpan=e.gridItemColumnSpan??null,this.gridItemRowSpan=e.gridItemRowSpan??null,g(this)}async setText(e){await this.#e.invoke("setTextForNode",this.id,e)}async getText(){return this.#e.invoke("getTextForNode",this.id)}async setHTML(e){await this.#e.invoke(j,this.id,e),await new Promise(t=>{setTimeout(t,30)})}async getHTML(){return this.#e.invoke($,this.id)}},Se=class extends P{[s]="SVGNode";name;visible;locked;svg;rotation;opacity;position;top;right;bottom;left;centerX;centerY;width;height;constructor(e,t){super(e,t),this.name=e.name??null,this.visible=e.visible??!0,this.locked=e.locked??!1,this.svg=e.svg,this.rotation=e.rotation??0,this.opacity=e.opacity??1,this.position=e.position,this.left=e.left??null,this.right=e.right??null,this.top=e.top??null,this.bottom=e.bottom??null,this.centerX=e.centerX??null,this.centerY=e.centerY??null,this.width=e.width??null,this.height=e.height??null,g(this)}},Ne=class extends P{[s]="VectorSetItemNode";name;visible;locked;top;right;bottom;left;centerX;centerY;width;height;#e;constructor(e,t){super(e,t),this.#e=t,this.name=e.name??null,this.visible=e.visible??!0,this.locked=e.locked??!1,this.top=e.top??null,this.right=e.right??null,this.bottom=e.bottom??null,this.left=e.left??null,this.centerX=e.centerX??null,this.centerY=e.centerY??null,this.width=e.width??null,this.height=e.height??null,g(this)}async getSVG(){return this.#e.invoke("getSVGForNode",this.id)}},ve=class extends P{[s]="ComponentInstanceNode";name;visible;locked;componentIdentifier;insertURL;componentName;controls;rotation;opacity;position;top;right;bottom;left;centerX;centerY;width;height;maxWidth;minWidth;maxHeight;minHeight;aspectRatio;#e;#t;#i;get typedControls(){return this.#i||(this.#i=c(this.#e,this.#t.typedControls)??{}),this.#i}constructor(e,t){super(e,t),this.#e=t,this.#t=e,this.name=e.name??null,this.visible=e.visible??!0,this.locked=e.locked??!1,this.componentIdentifier=e.componentIdentifier,this.componentName=e.componentName??null,this.insertURL=e.insertURL??null,this.controls=c(t,e.controls)??{},this.rotation=e.rotation??0,this.opacity=e.opacity??1,this.position=e.position,this.left=e.left??null,this.right=e.right??null,this.top=e.top??null,this.bottom=e.bottom??null,this.centerX=e.centerX??null,this.centerY=e.centerY??null,this.width=e.width??null,this.height=e.height??null,this.maxWidth=e.maxWidth??null,this.minWidth=e.minWidth??null,this.maxHeight=e.maxHeight??null,this.minHeight=e.minHeight??null,this.aspectRatio=e.aspectRatio??null,g(this)}async getRuntimeError(){return this.#e.invoke("getRuntimeErrorForCodeComponentNode",this.id)}},G=class extends P{[s]="WebPageNode";#e;path;collectionId;constructor(e,t){super(e,t),this.path=e.path??null,this.collectionId=e.collectionId??null,this.#e=t,g(this)}getBreakpointSuggestions(){return this.#e.invoke("getBreakpointSuggestionsForWebPage",this.id)}async addBreakpoint(e,t){let n=await this.#e.invoke("addBreakpointToWebPage",this.id,e,t),a=m(n,this.#e);return l(a instanceof N),l(rn(a),"Expected node to be a FrameNode"),a}async getActiveCollectionItem(){let e=await this.#e.invoke("getActiveCollectionItemForWebPage",this.id);return e?new De(e,this.#e):null}},K=class extends P{[s]="ComponentNode";name;componentIdentifier;insertURL;componentName;#e;constructor(e,t){super(e,t),this.#e=t,this.componentIdentifier=e.componentIdentifier,this.insertURL=e.insertURL??null,this.componentName=e.componentName??null,this.name=e.name??null,g(this)}async addVariant(e,t){let n=await this.#e.invoke("addVariantToComponent",this.id,e,t);if(!n)throw new Error("Failed to add variant to component");let a=m(n,this.#e);return l(a instanceof N),l(Lt(a),"Node is not a component variant"),a}async addGestureVariant(e,t,n){let a=await this.#e.invoke("addGestureVariantToComponent",this.id,e,t,n);if(!a)throw new Error("Failed to add state to component");let r=m(a,this.#e);return l(r instanceof N),l(on(r),"Node is not a gesture variant"),r}async getVariables(){let e=await this.#e.invoke("getVariables",this.id);return c(this.#e,e)}async addVariables(e){let t=await this.#e.invoke("addVariables",this.id,D(e));return c(this.#e,t)}async removeVariables(e){await this.#e.invoke("removeVariables",this.id,e)}async setVariableOrder(e){await this.#e.invoke("setVariableOrder",this.id,e)}},Ve=class extends P{[s]="VectorSetNode";name;constructor(e,t){super(e,t),this.name=e.name??null,g(this)}},H=class extends P{[s]="DesignPageNode";name;constructor(e,t){super(e,t),this.name=e.name??null,g(this)}},ke=class extends P{[s]="UnknownNode";constructor(e,t){super(e,t),g(this)}};function m(i,e){switch(i[s]){case"DesignPageNode":return new H(i,e);case"WebPageNode":return new G(i,e);case"ComponentNode":return new K(i,e);case"VectorSetNode":return new Ve(i,e);case"VectorSetItemNode":return new Ne(i,e);case"ComponentInstanceNode":return new ve(i,e);case"FrameNode":return new N(i,e);case"SVGNode":return new Se(i,e);case"TextNode":return new z(i,e);case"UnknownNode":return new ke(i,e);default:return new ke(i,e)}}function st(i){return i instanceof N}function sn(i){return i instanceof z}function ln(i){return i instanceof Se}function Z(i){return i instanceof ve}function dn(i){return i instanceof G}function un(i){return i instanceof K}function cn(i){return i instanceof H}function pn(i){return i instanceof Ve}function mn(i){return i instanceof Ne}function O(i){return i instanceof ke}function Ae(i){return!!(st(i)||sn(i)||Z(i)||ln(i)||mn(i)||O(i))}function Ut(i){return!!(dn(i)||cn(i)||un(i)||pn(i)||O(i))}var Ot=Symbol(),zt=Symbol(),Gt=Symbol(),Kt=Symbol(),Ht=Symbol(),$t=Symbol(),jt=Symbol(),V={publish:Ot,getDeployments:zt,deploy:Gt,getChangedPaths:Kt,getChangeContributors:Ht,createManagedCollection:$t,rejectAllPending:jt};var va=["unstable_getCodeFile","unstable_getCodeFiles","unstable_getCodeFileVersionContent","unstable_getCodeFileLint2","unstable_getCodeFileTypecheck2","unstable_getCodeFileVersions","lintCode"],Va=["closeNotification","closePlugin","setCloseWarning","getActiveCollection","getActiveLocale","getActiveManagedCollection","getCanvasRoot","getChildren","getCollection","getCollectionFields","getCollectionFields2","getCollectionItems","getCollectionItems2","getCollections","getColorStyle","getColorStyles","getCurrentUser","getCurrentUser2","getCustomCode","getDefaultLocale","getFont","getFonts","getImage","getImageData","getLocales","getLocalizationGroups","getManagedCollection","getManagedCollectionFields","getManagedCollectionFields2","getManagedCollectionItemIds","getManagedCollections","getNode","getNodesWithAttribute","getNodesWithAttributeSet","getNodesWithType","getParent","getPluginData","getPluginDataForNode","getPluginDataKeys","getPluginDataKeysForNode","getProjectInfo","getProjectInfo2","getPublishInfo","getRect","getSelection","getSVGForNode","getText","getTextForNode","getTextStyle","getTextStyles","hideUI","setBackgroundMessage","notify","onPointerDown","setActiveCollection","setSelection","showUI","getCodeFileVersionContent","typecheckCode","getCodeFileVersions","getCodeFiles","getCodeFile","getRedirects","uploadFile","uploadFiles","uploadImage","uploadImages","zoomIntoView","navigateTo","getRuntimeErrorForModule","getRuntimeErrorForCodeComponentNode","showProgressOnInstances","removeProgressFromInstances","addComponentInstancePlaceholder","updateComponentInstancePlaceholder","removeComponentInstancePlaceholder","setMenu","showContextMenu","getBreakpointSuggestionsForWebPage","getActiveCollectionItemForWebPage","getVariables","getVectorSets","getVectorSetItems","getVectorSetItemVariables","getChangedPaths","getChangeContributors","getDeployments",Oe,ze,$,"getAiServiceInfo","sendTrackingEvent",...va],ka=new Set(Va);function gn(i){return!ka.has(i)}var We={addComponentInstance:["addComponentInstance"],addComponentInstancePlaceholder:[],addDetachedComponentLayers:["addDetachedComponentLayers"],addImage:["addImage"],addImages:["addImages"],addSVG:["addSVG"],addText:["addText"],addRedirects:["addRedirects"],getRedirects:[],removeRedirects:["removeRedirects"],setRedirectOrder:["setRedirectOrder"],subscribeToRedirects:[],cloneNode:["cloneNode"],closePlugin:[],createColorStyle:["createColorStyle"],createFrameNode:["createNode"],createTextNode:["createNode"],createComponentNode:["createNode"],createTextStyle:["createTextStyle"],createDesignPage:["createDesignPage"],createWebPage:["createWebPage"],getActiveCollection:[],getActiveLocale:[],getActiveManagedCollection:[],getCanvasRoot:[],getChildren:[],getCollection:[],getCollections:[],getColorStyle:[],getColorStyles:[],getCurrentUser:[],getCustomCode:[],getDefaultLocale:[],getFont:[],getFonts:[],getImage:[],getLocales:[],getLocalizationGroups:[],getManagedCollection:[],getManagedCollections:[],getNode:[],getNodesWithAttribute:[],getNodesWithAttributeSet:[],getNodesWithType:[],getParent:[],getPluginData:[],getPluginDataKeys:[],getProjectInfo:[],getPublishInfo:[],getRect:[],getSelection:[],getText:[],getTextStyle:[],getTextStyles:[],hideUI:[],setBackgroundMessage:[],setCloseWarning:[],lintCode:[],makeDraggable:["onDragEnd","onDragStart","onDrag","setDragData","preloadDetachedComponentLayers","preloadImageUrlForInsertion","preloadDragPreviewImage"],notify:[],preloadDetachedComponentLayers:["preloadDetachedComponentLayers"],preloadDragPreviewImage:["preloadDragPreviewImage"],preloadImageUrlForInsertion:["preloadImageUrlForInsertion"],removeNode:["removeNodes2"],removeNodes:["removeNodes2"],setAttributes:["setAttributes"],setCustomCode:["setCustomCode"],setImage:["setImage"],setLocalizationData:["setLocalizationData"],setMenu:[],showContextMenu:[],setParent:["setParent"],setPluginData:["setPluginData"],setSelection:[],setText:["setText"],typecheckCode:[],showUI:[],subscribeToCanvasRoot:[],subscribeToColorStyles:[],subscribeToCustomCode:[],subscribeToImage:[],subscribeToPublishInfo:[],subscribeToSelection:[],subscribeToText:[],subscribeToTextStyles:[],createCodeFile:["createCodeFile"],unstable_ensureMinimumDependencyVersion:["unstable_ensureMinimumDependencyVersion"],getCodeFiles:[],getCodeFile:[],subscribeToCodeFiles:[],subscribeToOpenCodeFile:[],uploadFile:[],uploadFiles:[],uploadImage:[],uploadImages:[],zoomIntoView:[],navigateTo:[],getVectorSets:[],"VectorSet.getItems":[],"VectorSetItem.getVariables":[],"Node.navigateTo":[],"CodeFile.navigateTo":[],"Collection.navigateTo":[],"ManagedCollection.navigateTo":[],"CollectionItem.navigateTo":[],"ComponentInstanceNode.getRuntimeError":[],"ImageAsset.cloneWithAttributes":[],"ImageAsset.getData":[],"ImageAsset.loadBitmap":[],"ImageAsset.loadImage":[],"ImageAsset.measure":[],"CodeFile.remove":["removeCodeFile"],"CodeFile.rename":["renameCodeFile"],"CodeFile.setFileContent":["setCodeFileContent"],"CodeFile.getVersions":[],"CodeFile.showProgressOnInstances":[],"CodeFile.removeProgressFromInstances":[],"CodeFile.lint":[],"CodeFile.typecheck":[],"CodeFileVersion.getContent":[],"ComponentInstancePlaceholder.setAttributes":[],"ComponentInstancePlaceholder.remove":[],"ComponentInstancePlaceholder.replaceWithComponentInstance":["replaceComponentInstancePlaceholderWithComponentInstance"],"Field.remove":["removeCollectionFields"],"Field.setAttributes":["addCollectionFields2"],"EnumField.addCase":["addEnumCase"],"EnumField.setCaseOrder":["setEnumCaseOrder"],"Collection.addFields":["addCollectionFields2"],"Collection.addItems":["addCollectionItems2"],"Collection.getFields":[],"Collection.getItems":[],"Collection.getPluginData":[],"Collection.getPluginDataKeys":[],"Collection.removeFields":["removeCollectionFields"],"Collection.removeItems":["removeCollectionItems"],"Collection.setAsActive":[],"Collection.setFieldOrder":["setCollectionFieldOrder"],"Collection.setItemOrder":["setCollectionItemOrder"],"Collection.setPluginData":["setPluginDataForNode"],"CollectionItem.getPluginData":[],"CollectionItem.getPluginDataKeys":[],"CollectionItem.remove":["removeCollectionItems"],"CollectionItem.setAttributes":["setCollectionItemAttributes2"],"CollectionItem.setPluginData":["setPluginDataForNode"],"ManagedCollection.addItems":["addManagedCollectionItems2"],"ManagedCollection.getFields":[],"ManagedCollection.getItemIds":[],"ManagedCollection.getPluginData":[],"ManagedCollection.getPluginDataKeys":[],"ManagedCollection.removeItems":["removeManagedCollectionItems"],"ManagedCollection.setAsActive":[],"ManagedCollection.setFields":["setManagedCollectionFields"],"ManagedCollection.setItemOrder":["setManagedCollectionItemOrder"],"ManagedCollection.setPluginData":["setPluginDataForNode"],"Node.clone":["cloneNode"],"Node.getChildren":[],"Node.getNodesWithAttribute":[],"Node.getNodesWithAttributeSet":[],"Node.getNodesWithType":[],"Node.getParent":[],"Node.getPluginData":[],"Node.getPluginDataKeys":[],"Node.getRect":[],"Node.remove":["removeNodes2"],"Node.select":[],"Node.setAttributes":["setAttributes"],"Node.setPluginData":["setPluginDataForNode"],"Node.walk":[],"Node.zoomIntoView":[],"TextNode.getText":[],"TextNode.setText":["setTextForNode"],"TextNode.setHTML":[j],"TextNode.getHTML":[],"ComponentNode.addVariant":["addVariantToComponent"],"ComponentNode.addGestureVariant":["addGestureVariantToComponent"],"ComponentNode.getVariables":[],"ComponentNode.addVariables":["addVariables"],"ComponentNode.removeVariables":["removeVariables"],"WebPageNode.getBreakpointSuggestions":[],"WebPageNode.addBreakpoint":["addBreakpointToWebPage"],"WebPageNode.getActiveCollectionItem":[],"ColorStyle.getPluginData":[],"ColorStyle.getPluginDataKeys":[],"ColorStyle.remove":["removeColorStyle"],"ColorStyle.setAttributes":["setColorStyleAttributes"],"ColorStyle.setPluginData":["setPluginDataForNode"],"TextStyle.getPluginData":[],"TextStyle.getPluginDataKeys":[],"TextStyle.remove":["removeTextStyle"],"TextStyle.setAttributes":["setTextStyleAttributes"],"TextStyle.setPluginData":["setPluginDataForNode"],"Variable.setAttributes":["updateVariable"],"Variable.remove":["removeVariables"],"ComponentNode.setVariableOrder":["setVariableOrder"],"EnumCase.remove":["removeEnumCase"],"EnumCase.setAttributes":["updateEnumCase"],"EnumVariable.addCase":["addEnumCase"],"EnumVariable.setCaseOrder":["setEnumCaseOrder"],createCollection:["createCollection"],createManagedCollection:["createManagedCollection"],[pt]:[],[mt]:[],[gt]:[],[yt]:[],[Ot]:["publish"],[zt]:[],[Gt]:["deploy"],[Kt]:[],[Ht]:[],[$t]:["createManagedCollection"],[jt]:[]},lt=[];for(let i of Object.keys(We))We[i].length!==0&&lt.push(i);g(lt);function qt(i){let e={};for(let t of lt){let n=We[t];e[t]=n.every(a=>i[a])}return e}function yn(){let i={};for(let e of lt)i[e]=!0;return i}var _=null;function hn(i){if(typeof window>"u")return;if(!_){let t=document.createElement("style");document.head.appendChild(t),_=t.sheet}if(!_){i();return}let e=_.insertRule("* { transition: none !important; animation: none !important; }");i(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{_&&_.deleteRule(e)})})}var dt=class{methodInvocationId=0;notificationId=0;postMessage;methodResponseHandlers=new Map;mode;subscriptions=new Map;perMethodPermissionMap;permissionSubscriptions=new Set;messageTypesCheckedInIsAllowedTo=new Set;showUncheckedPermissionToasts=!0;environmentInfo=null;initialState;menuItemOnActionCallbackMap=new Map;contextMenuItemOnActionCallbackMap=new Map;rejectAllPending(e){for(let[t,n]of this.methodResponseHandlers)n.reject(e),this.methodResponseHandlers.delete(t)}constructor(e){if(!e){this.postMessage=()=>{},this.mode="canvas",this.perMethodPermissionMap=yn(),this.initialState={mode:"canvas",intent:"plugin/open"};return}switch(e.transport.onMessage(this.onMessage),typeof window<"u"&&(window.addEventListener("error",t=>{t.error instanceof W&&(t.preventDefault(),t.stopImmediatePropagation())}),window.addEventListener("unhandledrejection",t=>{t.reason instanceof W&&(t.preventDefault(),t.stopImmediatePropagation())})),this.mode=e.mode,this.initialState=e.initialState??{mode:e.mode,intent:"plugin/open"},this.environmentInfo=e.environmentInfo,this.perMethodPermissionMap=qt(e.permissionMap),this.postMessage=(t,n)=>e.transport.send(t,n),this.mode){case"canvas":case"image":case"editImage":case"configureManagedCollection":case"syncManagedCollection":case"collection":case"localization":case"code":typeof window<"u"&&window.addEventListener("pointerdown",()=>{this.invoke("onPointerDown")}),e.theme&&this.applyPluginTheme(e.theme),this.subscribe("theme",this.applyPluginTheme);break;case"api":break;default:He(this.mode)}}async invoke(e,...t){return this.invokeTransferable(e,void 0,...t)}async invokeTransferable(e,t,...n){if(process.env.NODE_ENV!=="production"&&this.mode!=="api"&&gn(e)&&!this.messageTypesCheckedInIsAllowedTo.has(e)){let r=`Invoking protected message type "${e}" without checking permissions first`;this.showUncheckedPermissionToasts&&this.notify(r),console.error(r)}return new Promise((r,d)=>{let y={type:"methodInvocation",methodName:e,id:this.methodInvocationId,args:n.map(D)};this.methodInvocationId+=1,this.methodResponseHandlers.set(y.id,{resolve:r,reject:d}),this.postMessage(y,t)})}subscribe(e,t){this.postMessage({type:"subscribe",topic:e});let n=this.subscriptions.get(e)??new Set;return n.add(t),this.subscriptions.set(e,n),()=>{let a=this.subscriptions.get(e)??new Set;a.delete(t),a.size===0&&this.postMessage({type:"unsubscribe",topic:e}),this.subscriptions.set(e,a)}}onMessage=e=>{let t=e?.data??e;if(bi(t))switch(t.type){case"permissionUpdate":{this.perMethodPermissionMap=qt(t.permissionMap);for(let n of this.permissionSubscriptions)n();break}case"methodResponse":{let n=this.methodResponseHandlers.get(t.id);if(!n)throw new Error(`No handler for response with id ${t.id}`);this.methodResponseHandlers.delete(t.id),u(t.error)?n.reject(new te(t.error)):n.resolve(t.result);break}case"subscriptionMessage":{let{topic:n,payload:a}=t,r=this.subscriptions.get(n);if(!r)throw new Error("Received a subscription message but no handler present");for(let d of r)d(a);break}case"menuAction":{let n=this.getOnActionFromCallbackMap(t.actionId,t.actionType);if(!n)throw new Error("Menu action received for an unknown menu item");n();break}default:He(t)}};getOnActionFromCallbackMap(e,t){switch(t){case"pluginMenu":return this.menuItemOnActionCallbackMap.get(e);case"contextMenu":return this.contextMenuItemOnActionCallbackMap.get(e);default:He(t)}}applyPluginTheme=e=>{hn(()=>{document.body.setAttribute("data-framer-theme",e.mode);for(let t in e.tokens)document.body.style.setProperty(t,e.tokens[t])})};async cloneNode(e){let t=await this.invoke("cloneNode",e);return t?m(t,this):null}async setAttributes(e,t){let n=await this.invoke("setAttributes",e,t);return n?m(n,this):null}async getParent(e){let t=await this.invoke("getParent",e);return t?m(t,this):null}async getChildren(e){return(await this.invoke("getChildren",e)).map(n=>{let a=m(n,this);return l(Ae(a)),a})}notify=(e,t)=>{let n=`notification-${this.notificationId}`;return this.notificationId+=1,this.invoke("notify",e,{notificationId:n,variant:t?.variant??"info",buttonText:t?.button?.text,durationMs:t?.durationMs}).then(a=>{a==="actionButtonClicked"&&t?.button?.onClick&&t.button.onClick(),t?.onDisappear&&t.onDisappear()}),{close:()=>this.invoke("closeNotification",n)}};async setMenu(e){this.menuItemOnActionCallbackMap=new Map;let t=qe(e,this.menuItemOnActionCallbackMap);await this.invoke("setMenu",t)}async showContextMenu(e,t){this.contextMenuItemOnActionCallbackMap=new Map;let n=qe(e,this.contextMenuItemOnActionCallbackMap);await this.invoke("showContextMenu",n,t)}};function Aa(i){return i.type==="component"}function Wa(i){return i.type==="override"}var Xt=class{#e;#t;get id(){return this.#e.id}get name(){return this.#e.name}get createdAt(){return this.#e.createdAt}get createdBy(){return this.#e.createdBy}constructor(e,t){this.#t=t,this.#e=e}async getContent(){return await this.#t.invoke("getCodeFileVersionContent",this.#e.fileId,this.#e.id)}},B=class i{#e;#t;get id(){return this.#e.id}get name(){return this.#e.name}get path(){return this.#e.path}get content(){return this.#e.content}get exports(){return this.#e.exports}get versionId(){return this.#e.versionId}constructor(e,t){this.#t=t,this.#e=e}async setFileContent(e){let t=await this.#t.invoke("setCodeFileContent",this.id,e);return new i(t,this.#t)}async rename(e){let t=await this.#t.invoke("renameCodeFile",this.id,e);return new i(t,this.#t)}async remove(){return this.#t.invoke("removeCodeFile",this.id)}async getVersions(){return(await this.#t.invoke("getCodeFileVersions",this.id)).map(t=>new Xt(t,this.#t))}async showProgressOnInstances(e){return this.#t.invoke("showProgressOnInstances",this.id,e)}async removeProgressFromInstances(){return this.#t.invoke("removeProgressFromInstances",this.id)}async lint(e){return Promise.resolve([])}async typecheck(e){return await this.#t.invoke("typecheckCode",this.name,this.content,e,this.id)}async navigateTo(){return this.#t.invoke("navigateTo",this.id)}};var ut=class i{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get id(){return this.#e.id}get width(){return this.#e.width}get height(){return this.#e.height}get title(){return this.#e.title}get codePreview(){return this.#e.codePreview}async setAttributes(e){let t=await this.#t.invoke("updateComponentInstancePlaceholder",this.id,e);return t?new i(t,this.#t):null}async remove(){await this.#t.invoke("removeComponentInstancePlaceholder",this.id)}async replaceWithComponentInstance(e,t){let n=await this.#t.invoke("replaceComponentInstancePlaceholderWithComponentInstance",this.id,e,t);if(!n)return null;let a=m(n,this.#t);return l(Z(a)),a}};var Ea=(()=>{let i=null;return{disableUntilMouseUp:()=>{if(i)return;i=document.createElement("style"),i.textContent="* { pointer-events: none !important; user-select: none !important; -webkit-user-select: none !important; }",document.head.appendChild(i);let e=()=>{i&&(document.head.removeChild(i),i=null,a())},t=r=>{r.buttons>0&&r.buttons&1||e()},n=()=>{e()};window.addEventListener("pointerup",t,!0),window.addEventListener("pointermove",t,!0),window.addEventListener("blur",n);function a(){window.removeEventListener("pointerup",t,!0),window.removeEventListener("pointermove",t,!0),window.removeEventListener("blur",n)}}}})(),fn=5,Ma=(()=>{let i=1;return{next:()=>`drag-${i++}`}})();function wa(){}function Cn(i,e,t,n){if(i.mode!=="canvas")return wa;let a=Ma.next(),r=document.body.style.cursor,d={type:"idle"},y=document.body,we=T.subscribeToIsAllowedTo("makeDraggable",h=>{h||ni()}),k=h=>{T.isAllowedTo("makeDraggable")&&d.type!=="idle"&&(d.type==="dragging"&&i.invoke("onDragEnd",{...h,dragSessionId:a}).then(I=>{try{n?.(I)}catch{}}).catch(I=>{if(I instanceof Error){n?.({status:"error",reason:I.message});return}if(typeof I=="string"){n?.({status:"error",reason:I});return}n?.({status:"error"})}),ni())},A=h=>{if(!T.isAllowedTo("makeDraggable")||d.type==="idle")return;if(!(h.buttons>0&&!!(h.buttons&1))){k({cancelled:!1});return}let{clientX:Re,clientY:Q}=h;if(d.type==="pointerDown"){let ee=Re-d.dragStart.mouse.x,ai=Q-d.dragStart.mouse.y;if(Math.abs(ee)<fn&&Math.abs(ai)<fn)return;d={type:"dragging",dragStart:d.dragStart},i.invoke("onDragStart",d.dragStart),document.getSelection()?.empty(),Ea.disableUntilMouseUp()}y.setPointerCapture(h.pointerId);let Be={x:Re,y:Q};i.invoke("onDrag",{dragSessionId:a,mouse:Be}).then(ee=>{d.type==="dragging"&&(document.body.style.cursor=ee??"")})},Qt=h=>{h.key==="Escape"&&k({cancelled:!0})},ei=()=>{k({cancelled:!0})},ti=h=>{if(!T.isAllowedTo("makeDraggable"))return;k({cancelled:!0});let I=e.getBoundingClientRect(),Re={x:I.x,y:I.y,width:I.width,height:I.height},Q,Be=e.querySelectorAll("svg");if(Be.length===1){let Le=Be.item(0).getBoundingClientRect();Q={x:Le.x,y:Le.y,width:Le.width,height:Le.height}}let ee={x:h.clientX,y:h.clientY};d={type:"pointerDown",dragStart:{dragSessionId:a,elementRect:Re,svgRect:Q,mouse:ee}},i.invoke("setDragData",a,t()),y.addEventListener("pointermove",A,!0),y.addEventListener("pointerup",A,!0),window.addEventListener("keydown",Qt,!0),window.addEventListener("blur",ei)},ii=()=>{if(!T.isAllowedTo("makeDraggable"))return;let h=t();h.type==="detachedComponentLayers"&&i.invoke("preloadDetachedComponentLayers",h.url),h.type==="image"&&i.invoke("preloadImageUrlForInsertion",h.image),h.previewImage&&i.invoke("preloadDragPreviewImage",h.previewImage)};e.addEventListener("pointerdown",ti),e.addEventListener("mouseenter",ii);function ni(){d={type:"idle"},document.body.style.cursor=r,y.removeEventListener("pointermove",A,!0),y.removeEventListener("pointerup",A,!0),window.removeEventListener("keydown",Qt,!0),window.removeEventListener("blur",ei)}return()=>{e.removeEventListener("pointerdown",ti),e.removeEventListener("mouseenter",ii),k({cancelled:!0}),we()}}var J=class i{#e;#t;get id(){return this.#e.id}get from(){return this.#e.from}get to(){return this.#e.to}get expandToAllLocales(){return this.#e.expandToAllLocales}constructor(e,t){this.#t=t,this.#e=e}remove(){return this.#t.invoke("removeRedirects",[this.id])}async setAttributes(e){let t={...e,id:this.id},[n]=await this.#t.invoke("addRedirects",[t]);return l(Ge(n)),p(n)?null:new i(n,this.#t)}};var Ee=class{id;name;owner;#e;constructor(e,t){this.id=e.id,this.name=e.name,this.owner=e.owner,this.#e=t}async getItems(){return(await this.#e.invoke("getVectorSetItems",this.id)).map(t=>new ct(t,this.#e))}},ct=class{id;name;insertUrl;iconUrl;#e;#t;constructor(e,t){this.id=e.id,this.name=e.name,this.insertUrl=e.insertUrl,this.iconUrl=e.iconUrl,this.#e=e.moduleId,this.#t=t}async getVariables(){return this.#t.invoke("getVectorSetItemVariables",this.id,this.#e)}};var Me=class{#e;constructor(e){this.#e=e}get mode(){return this.#e.mode}isAllowedTo(...e){if(process.env.NODE_ENV!=="production")for(let t of e)for(let n of We[t])this.#e.messageTypesCheckedInIsAllowedTo.add(n);return e.every(t=>this.#e.perMethodPermissionMap[t])}subscribeToIsAllowedTo(...e){let[t,n]=li(e),a=this.isAllowedTo(...t),r=()=>{let d=this.isAllowedTo(...t);d!==a&&(a=d,n(a))};return this.#e.permissionSubscriptions.add(r),()=>{this.#e.permissionSubscriptions.delete(r)}}async showUI(e){return this.#e.invoke("showUI",e)}async hideUI(){return this.#e.invoke("hideUI")}async setBackgroundMessage(e){return this.#e.invoke("setBackgroundMessage",e)}closePlugin(e,t){throw this.#e.invoke("closePlugin",e,t),new W}async getCurrentUser(){return this.#e.invoke("getCurrentUser2")}async getProjectInfo(){return this.#e.invoke("getProjectInfo2")}async getSelection(){return(await this.#e.invoke("getSelection")).map(t=>{let n=m(t,this.#e);return l(Ae(n)),n})}async setSelection(e){let t=u(e)?[e]:Array.from(e);return this.#e.invoke("setSelection",t)}subscribeToSelection(e){return this.#e.subscribe("selection",t=>{let n=t.map(a=>{let r=m(a,this.#e);return l(Ae(r)),r});e(n)})}async getCanvasRoot(){let e=await this.#e.invoke("getCanvasRoot"),t=m(e,this.#e);return l(Ut(t)),t}subscribeToCanvasRoot(e){return this.#e.subscribe("canvasRoot",t=>{let n=m(t,this.#e);l(Ut(n)),e(n)})}async getPublishInfo(){return this.#e.invoke("getPublishInfo")}subscribeToPublishInfo(e){return this.#e.subscribe("publishInfo",e)}async createFrameNode(e,t){let n=await this.#e.invoke("createNode","FrameNode",t??null,e);if(!n)return null;let a=m(n,this.#e);return l(a instanceof N),a}async removeNodes(e){return this.#e.invoke("removeNodes2",e)}async removeNode(e){return this.removeNodes([e])}async cloneNode(e){return this.#e.cloneNode(e)}async getNode(e){let t=await this.#e.invoke("getNode",e);return t?m(t,this.#e):null}async getParent(e){return this.#e.getParent(e)}async getChildren(e){return this.#e.getChildren(e)}async getRect(e){return this.#e.invoke("getRect",e)}async zoomIntoView(e,t){let n=u(e)?[e]:Array.from(e);return this.#e.invoke("zoomIntoView",n,t)}async setAttributes(e,t){return this.#e.setAttributes(e,t)}async setParent(e,t,n){return this.#e.invoke("setParent",e,t,n)}async getNodesWithType(e){return(await this.#e.invoke("getNodesWithType",null,e)).map(n=>m(n,this.#e))}async getNodesWithAttribute(e){return(await this.#e.invoke("getNodesWithAttribute",null,e)).map(n=>m(n,this.#e))}async getNodesWithAttributeSet(e){return(await this.#e.invoke("getNodesWithAttributeSet",null,e)).map(n=>m(n,this.#e))}async getImage(){let e=await this.#e.invoke("getImage");return e?c(this.#e,e):null}subscribeToImage(e){return this.#e.subscribe("image",t=>{if(!t){e(null);return}e(c(this.#e,t))})}async addImage(e){let t=await oe(e),n=w(t);return this.#e.invokeTransferable("addImage",n,t)}async setImage(e){let t=await oe(e),n=w(t);return this.#e.invokeTransferable("setImage",n,t)}async uploadImage(e){let t=await oe(e),n=w(t),a=await this.#e.invokeTransferable("uploadImage",n,t);return c(this.#e,a)}async addImages(e){let t=await Ct(e),n=t.flatMap(w);await this.#e.invokeTransferable("addImages",n,t)}async uploadImages(e){let t=await Ct(e),n=t.flatMap(w),a=await this.#e.invokeTransferable("uploadImages",n,t);return c(this.#e,a)}async uploadFile(e){let t=await ft(e),n=await this.#e.invokeTransferable("uploadFile",w(t),t);return c(this.#e,n)}async uploadFiles(e){let t=await Promise.all(e.map(ft)),n=t.flatMap(w),a=await this.#e.invokeTransferable("uploadFiles",n,t);return c(this.#e,a)}async addSVG(e){return this.#e.invoke("addSVG",e)}async addComponentInstance({url:e,attributes:t,parentId:n}){let a=await this.#e.invoke("addComponentInstance",{url:e,attributes:t,parentId:n}),r=m(a,this.#e);return l(Z(r)),r}async addDetachedComponentLayers({url:e,layout:t,attributes:n}){let a=await this.#e.invoke("addDetachedComponentLayers",{url:e,layout:t,attributes:n}),r=m(a,this.#e);return l(st(r)),r}async preloadDetachedComponentLayers(e){await this.#e.invoke("preloadDetachedComponentLayers",e)}async preloadImageUrlForInsertion(e){await this.#e.invoke("preloadImageUrlForInsertion",e)}async preloadDragPreviewImage(e){await this.#e.invoke("preloadDragPreviewImage",e)}async getText(){return this.#e.invoke("getText")}async setText(e){return this.#e.invoke("setText",e)}async addText(e,t){return this.#e.invoke("addText",e,t)}async setCustomCode(e){return this.#e.invoke("setCustomCode",e)}async getCustomCode(){return this.#e.invoke("getCustomCode")}subscribeToCustomCode(e){return this.#e.subscribe("customCode",e)}subscribeToText(e){return this.#e.subscribe("text",e)}makeDraggable(e,t,n){return Cn(this.#e,e,t,n)}async getActiveManagedCollection(){let e=await this.#e.invoke("getActiveManagedCollection");return l(e,"Collection data must be defined"),new Y(e,this.#e)}async getManagedCollection(){return this.getActiveManagedCollection()}async getManagedCollections(){let e=await this.#e.invoke("getManagedCollections");return l(e,"Collections data must be defined"),e.map(t=>new Y(t,this.#e))}async getCollection(e){let t=await this.#e.invoke("getCollection",e);return t?new U(t,this.#e):null}async getActiveCollection(){let e=await this.#e.invoke("getActiveCollection");return e?new U(e,this.#e):null}async getCollections(){return(await this.#e.invoke("getCollections")).map(t=>new U(t,this.#e))}notify=(e,t)=>this.#e.notify(e,t);async getPluginData(e){return this.#e.invoke("getPluginData",e)}async setPluginData(e,t){return this.#e.invoke("setPluginData",e,t)}async getPluginDataKeys(){return this.#e.invoke("getPluginDataKeys")}async getColorStyles(){let e=await this.#e.invoke("getColorStyles");return c(this.#e,e)}async getColorStyle(e){let t=await this.#e.invoke("getColorStyle",e);return t?c(this.#e,t):null}async createColorStyle(e){let t=await this.#e.invoke("createColorStyle",e);return c(this.#e,t)}subscribeToColorStyles(e){return this.#e.subscribe("colorStyles",t=>{let n=c(this.#e,t);return e(n)})}async getTextStyles(){let e=await this.#e.invoke("getTextStyles");return c(this.#e,e)}async getTextStyle(e){let t=await this.#e.invoke("getTextStyle",e);return t?c(this.#e,t):null}async createTextStyle(e){let t=await this.#e.invoke("createTextStyle",e);return c(this.#e,t)}subscribeToTextStyles(e){return this.#e.subscribe("textStyles",t=>{let n=c(this.#e,t);return e(n)})}async getFont(e,t){let n=await this.#e.invoke("getFont",e,t);return n?c(this.#e,n):null}async getFonts(){let e=await this.#e.invoke("getFonts");return c(this.#e,e)}getLocales(){return this.#e.invoke("getLocales")}getDefaultLocale(){return this.#e.invoke("getDefaultLocale")}getActiveLocale(){return this.#e.invoke("getActiveLocale")}async getLocalizationGroups(){return this.#e.invoke("getLocalizationGroups")}setLocalizationData(e){return this.#e.invoke("setLocalizationData",e)}async getRedirects(){return(await this.#e.invoke("getRedirects")).map(t=>new J(t,this.#e))}subscribeToRedirects(e){return this.#e.subscribe("redirects",t=>{let n=t.map(a=>new J(a,this.#e));return e(n)})}async addRedirects(e){return(await this.#e.invoke("addRedirects",e)).map(n=>new J(n,this.#e))}async removeRedirects(e){return this.#e.invoke("removeRedirects",e)}async setRedirectOrder(e){return this.#e.invoke("setRedirectOrder",e)}async createCodeFile(e,t,n){let a=await this.#e.invoke("createCodeFile",e,t,n);return new B(a,this.#e)}async getCodeFiles(){let e=await this.#e.invoke("getCodeFiles"),t=[];for(let n of e)t.push(new B(n,this.#e));return t}async getCodeFile(e){let t=await this.#e.invoke("getCodeFile",e);return t?new B(t,this.#e):null}lintCode(e,t,n){return Promise.resolve([])}typecheckCode(e,t,n,a){return this.#e.invoke("typecheckCode",e,t,n,a)}subscribeToCodeFiles(e){return this.#e.subscribe("codeFiles",t=>{let n=t?.map(a=>new B(a,this.#e));return e(n)})}setMenu(e){return this.#e.setMenu(e)}showContextMenu(e,t){return this.#e.showContextMenu(e,t)}async unstable_ensureMinimumDependencyVersion(e,t){return this.#e.invoke("unstable_ensureMinimumDependencyVersion",e,t)}async navigateTo(e,t){return this.#e.invoke("navigateTo",e,t)}subscribeToOpenCodeFile(e){return this.#e.subscribe("openCodeFile",t=>{let n=t?new B(t,this.#e):null;return e(n)})}async createDesignPage(e){let t=await this.#e.invoke("createDesignPage",e),n=m(t,this.#e);return l(n instanceof H,"Expected node to be a DesignPageNode"),n}async createWebPage(e){let t=await this.#e.invoke("createWebPage",e),n=m(t,this.#e);return l(n instanceof G,"Expected node to be a WebPageNode"),n}async createCollection(e){let t=await this.#e.invoke("createCollection",e);return new U(t,this.#e)}async createManagedCollection(e){let t=await this.#e.invoke("createManagedCollection",e);return new Y(t,this.#e)}async setCloseWarning(e){return this.#e.invoke("setCloseWarning",e)}get[o.initialState](){return this.#e.initialState}},Yt=class extends Me{#e;constructor(e){super(e),this.#e=e,this.#e}},bn=class extends Yt{#e;constructor(e){super(e),this.#e=e,this.#e}async addComponentInstancePlaceholder(e){let t=await this.#e.invoke("addComponentInstancePlaceholder",e);return new ut(t,this.#e)}async[o.getAiServiceInfo](){return this.#e.invoke(Oe)}async[o.sendTrackingEvent](e,t,n){return this.#e.invoke(ze,e,t,n)}async[o.getHTMLForNode](e){return this.#e.invoke($,e)}async[o.setHTMLForNode](e,t){return this.#e.invoke(j,e,t)}get[o.environmentInfo](){return this.#e.environmentInfo}get[o.showUncheckedPermissionToasts](){return this.#e.showUncheckedPermissionToasts}set[o.showUncheckedPermissionToasts](e){this.#e.showUncheckedPermissionToasts=e}async createTextNode(e,t){let n=await this.#e.invoke("createNode","TextNode",t??null,e);if(!n)return null;let a=m(n,this.#e);return l(a instanceof z),a}async createComponentNode(e){let t=await this.#e.invoke("createNode","ComponentNode",null,{name:e});if(!t)return null;let n=m(t,this.#e);return l(n instanceof K),n}async getVectorSets(){return(await this.#e.invoke("getVectorSets")).map(t=>new Ee(t,this.#e))}async[V.publish](){return this.#e.invoke("publish")}async[V.getDeployments](){return this.#e.invoke("getDeployments")}async[V.deploy](e,t){return this.#e.invoke("deploy",e,t)}async[V.getChangedPaths](){return this.#e.invoke("getChangedPaths")}async[V.getChangeContributors](e,t){return this.#e.invoke("getChangeContributors",e,t)}async[V.createManagedCollection](e){return this.createManagedCollection(e)}[V.rejectAllPending](e){this.#e.rejectAllPending(e)}};var Zt=class{constructor(e){this.origin=e}send(e,t){window.parent.postMessage(e,this.origin,t)}onMessage(e){window.addEventListener("message",e)}};async function Ra(){return new Promise(i=>{function e({data:t,origin:n}){if(!Ti(t))return;window.removeEventListener("message",e);let r={transport:new Zt(n),mode:t.mode,permissionMap:t.permissionMap,environmentInfo:t.environmentInfo,origin:n,theme:t.theme??null,initialState:t.initialState};i(r)}window.addEventListener("message",e),window.parent.postMessage(Ci,"*")})}async function Ba(){return typeof window<"u"?Ra():null}var Tn=await Ba(),T=Tn?new Me(new dt(Tn)):new Proxy({},{get(i,e){throw new Error(`Cannot access framer.${String(e)} in server runtime. Use createFramerInstance() with a custom transport.`)}});import{useEffect as La,useState as In}from"react";function _t(...i){let[e,t]=In(()=>T.isAllowedTo(...i)),[n,a]=In(i);return si(i,n)||(t(T.isAllowedTo(...i)),a(i)),La(()=>{let r=T.subscribeToIsAllowedTo(...n,d=>{t(d)});return()=>{r()}},[n]),e}function Jt(i,e,t){let n=_t("makeDraggable"),a=Ga(()=>ne(e)?e():e);Oa(()=>{if(!n)return;let r=i.current;if(r instanceof HTMLElement)return T.makeDraggable(r,a,t)},[n,a,t])}function Ga(i){let e=za(i);return e.current=i,Ua((...t)=>e.current(...t),[])}var qa=Ha(function({data:e,children:t,onDragComplete:n,...a},r){let d=ja(null);if(Jt(d,e,n),$a(t)){let y=Object.assign({},a);return f(t.props)&&Object.assign(y,t.props),y.ref=Za(d,r,t.ref),Ka(t,y)}return xn.count(t)>1&&xn.only(t),null}),Xa="current";function Ya(i){return f(i)&&Xa in i}function Za(...i){return e=>{for(let t of i)ne(t)?t(e):Ya(t)&&(t.current=e)}}export{V as $framerApiOnly,o as $framerInternal,Ye as BooleanField,ce as BooleanVariable,Ie as BorderVariable,ot as CollectionReferenceField,Ze as ColorField,he as ColorVariable,ve as ComponentInstanceNode,K as ComponentNode,de as ConicGradient,tt as DateField,Te as DateVariable,H as DesignPageNode,qa as Draggable,R as EnumCase,at as EnumField,ye as EnumVariable,it as FieldDivider,nt as FileField,Ce as FileVariable,Qe as FormattedTextField,ge as FormattedTextVariable,N as FrameNode,W as FramerPluginClosedError,te as FramerPluginError,Pe as ImageField,fe as ImageVariable,se as LinearGradient,et as LinkField,be as LinkVariable,rt as MultiCollectionReferenceField,_e as NumberField,pe as NumberVariable,le as RadialGradient,Se as SVGNode,Je as StringField,me as StringVariable,z as TextNode,re as UnsupportedComputedValue,Fe as UnsupportedField,xe as UnsupportedVariable,Ee as VectorSet,ct as VectorSetItem,Ne as VectorSetItemNode,Ve as VectorSetNode,G as WebPageNode,T as framer,Sr as hasGridLayout,Dr as hasStackLayout,rn as isBreakpoint,Aa as isCodeFileComponentExport,Wa as isCodeFileOverrideExport,X as isColorStyle,on as isComponentGestureVariant,Z as isComponentInstanceNode,un as isComponentNode,ma as isComponentVariable,Lt as isComponentVariant,Mn as isComputedValue,cn as isDesignPageNode,Ta as isField,vn as isFileAsset,st as isFrameNode,kn as isImageAsset,ln as isSVGNode,sn as isTextNode,Tt as isTextStyle,hi as isVariable,mn as isVectorSetItemNode,pn as isVectorSetNode,dn as isWebPageNode,er as supportsAspectRatio,ar as supportsBackgroundColor,or as supportsBackgroundColorData,lr as supportsBackgroundGradient,dr as supportsBackgroundGradientData,rr as supportsBackgroundImage,sr as supportsBackgroundImageData,mr as supportsBorder,pr as supportsBorderRadius,Na as supportsBreakpoint,Cr as supportsComponentInfo,an as supportsComponentVariant,br as supportsFont,Tr as supportsFontData,Fr as supportsImageRendering,Ir as supportsInlineTextStyle,xr as supportsInlineTextStyleData,nn as supportsLayout,Pr as supportsLink,nr as supportsLocked,tr as supportsName,cr as supportsOpacity,fr as supportsOverflow,_o as supportsPins,Zo as supportsPosition,ur as supportsRotation,gr as supportsSVG,Jo as supportsSize,Qo as supportsSizeConstraints,yr as supportsTextTruncation,ir as supportsVisible,hr as supportsZIndex,_t as useIsAllowedTo,Jt as useMakeDraggable};
